{
    "name": "AWS Serverless Express",
    "id": "aws-serverless-express",
    "version": "1.0.4",
    "description": "Devcontainer configuration for scaffoldly/stack-aws-serverless-express",
    "options": {},
    "dependsOn": {},
    "installsAfter": [
        "ghcr.io/devcontainers/features/common-utils"
    ],
    "privileged": true,
    "containerEnv": {
        "LAMBDA_DOCKER_NETWORK": "bridge",
        "LOCALSTACK_VOLUME_DIR": "${containerWorkspaceFolder}/.cache",
        // "LOCALSTACK_ENDPOINT": "https://${localEnv:CODESPACE_NAME}-4566.${localEnv:GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN}"
    },
    "onCreateCommand": {
        "log": "echo executing onCreateCommand",
        "install-dependencies": "yarn install",
        "start-localstack": "localstack start --host --detached",
        "open-ports": "gh codespace ports visibility -c $CODESPACE_NAME 4566:public",
        "update-aws-endpoint": "aws configure set default.endpoint_url https://$CODESPACE_NAME-4566.$GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN"
    },
    "postStartCommand": {
        "log": "echo executing postStartCommand"
    },
    "postAttachCommand": {
        "log": "echo executing postAttachCommand"
    },
    "postCreateCommand": {
        "log": "echo executing postCreateCommand"
    },
    "updateContentCommand": {
        "log": "echo executing updateContentCommand"
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "esbenp.prettier-vscode",
                "dbaeumer.vscode-eslint"
            ],
            "settings": {
                "editor.defaultFormatter": "esbenp.prettier-vscode",
                "editor.codeActionsOnSave": {
                    "source.fixAll.eslint": "always"
                },
                "[html]": {
                    "editor.defaultFormatter": "vscode.html-language-features"
                },
                "editor.formatOnSave": true,
                "eslint.lintTask.enable": true,
                "eslint.validate": [
                    "javascript",
                    "typescript"
                ],
                "git.autofetch": true,
                "task.allowAutomaticTasks": "on",
                "prettier.prettierPath": "${containerWorkspaceFolder}/node_modules/prettier",
                "terminal.integrated.scrollback": 100000,
                "typescript.tsdk": "${containerWorkspaceFolder}/node_modules/typescript/lib",
                "typescript.tsserver.maxTsServerMemory": 1024,
                "typescript.preferences.importModuleSpecifier": "shortest"
            }
        }
    }
}